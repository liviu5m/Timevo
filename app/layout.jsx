"use client";

import { Inter } from "next/font/google";
import "./globals.css";
import Header from "@/components/Header";
import Footer from "@/components/Footer";
import { useEffect, useState } from "react";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faArrowUp } from "@fortawesome/free-solid-svg-icons";
import Loader from "@/components/Loader";
import { checkLoader } from "@/libs/customFunction";
import axios from "axios";
import { AppProvider } from "@/libs/AppContext";

const inter = Inter({ subsets: ["latin"] });

export default function RootLayout({ children }) {
  const [scroll, setScroll] = useState(false);

  useEffect(() => {
    if (localStorage.getItem("userId"))
      axios
        .get("/api/user/" + localStorage.getItem("userId"))
        .then((res) => {
          if (
            window.location.pathname.split("/")[1] == "admin" &&
            res.data.role != "admin"
          )
            window.location.pathname = "/";
        })
        .catch((err) => {
          console.log(err);
        });

    window.addEventListener("scroll", (e) => {
      if (window.scrollY > window.innerHeight) {
        setScroll(true);
      } else setScroll(false);
    });
  });

  const goUp = (e) => {
    window.scrollTo({
      top: 0,
      behavior: "smooth",
    });
  };
  return (
    <AppProvider>
      <html lang="en">
        <head>
          <title>Timevo</title>
          <link
            rel="icon"
            type="image/png"
            href="//timevo-theme.myshopify.com/cdn/shop/files/Favicon.svg?crop=center&amp;height=32&amp;v=1710850517&amp;width=32"
          ></link>
        </head>
        <body
          className={
            inter.className + " p-10 min-h-screen bg-whitee text-main z-10 overflow-x-hidden"
          }
        >
          {checkLoader() ? (
            <Loader />
          ) : (
            <>
              {window.location.pathname.split("/")[1] == "admin" ? (
                <>
                  <Header
                    show={window.location.pathname == "/" ? false : true}
                  />
                  {children}
                </>
              ) : (
                <>
                  <Header
                    show={window.location.pathname == "/" ? false : true}
                  />
                  {children}
                  <Footer />
                  <div
                    className={` ${
                      scroll ? "" : "-right-80"
                    } fixed go-up  bottom-5 right-5`}
                    onClick={(e) => goUp(e)}
                  >
                    <button className="bg-custom p-10 rounded-full relative">
                      <div className="scroll-text absolute rotate-animation flex items-center justify-center w-full h-full top-0 left-0">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="55"
                          height="57"
                          viewBox="0 0 55 57"
                          fill="none"
                        >
                          <path
                            d="M28.1372 50.4229V55.2106H29V56.1512H26.0086V55.2106H26.8643V50.4229H28.1372Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M18.0311 48.1784C18.4177 48.3645 18.6908 48.5798 18.8504 48.8241C19.0101 49.0684 19.0774 49.3416 19.0524 49.6435C19.0273 49.9454 18.9299 50.2726 18.7601 50.6252L17.8366 52.543C17.6647 52.8998 17.4696 53.18 17.2512 53.3836C17.0328 53.5872 16.7794 53.7006 16.4908 53.7238C16.2003 53.7514 15.8617 53.672 15.4751 53.4859C15.0844 53.2977 14.8091 53.0814 14.6495 52.8371C14.4835 52.5949 14.412 52.325 14.435 52.0274C14.458 51.7297 14.5554 51.4025 14.7272 51.0457L15.6508 49.1278C15.8206 48.7753 16.0157 48.4951 16.2361 48.2873C16.4566 48.0794 16.7142 47.9628 17.009 47.9373C17.2996 47.9098 17.6403 47.9902 18.0311 48.1784ZM17.6414 48.9876C17.5225 48.9303 17.4211 48.9181 17.3372 48.9509C17.2534 48.9838 17.1805 49.0429 17.1185 49.1282C17.0565 49.2134 17.0019 49.3049 16.9549 49.4026L15.7582 51.8875C15.7091 51.9895 15.6716 52.0891 15.6456 52.1865C15.6176 52.2882 15.6169 52.382 15.6435 52.4681C15.6701 52.5541 15.7428 52.6258 15.8618 52.6831C15.9722 52.7363 16.0694 52.7464 16.1532 52.7135C16.2371 52.6807 16.31 52.6216 16.372 52.5363C16.4319 52.4553 16.4865 52.3638 16.5356 52.2619L17.7322 49.777C17.7793 49.6793 17.8189 49.5806 17.8512 49.481C17.8792 49.3794 17.882 49.2866 17.8597 49.2026C17.8331 49.1165 17.7604 49.0448 17.6414 48.9876Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M7.97975 44.2897L8.08348 45.0663L7.20205 45.118L7.44715 45.8903L6.7521 46.119L6.62297 45.3446L6.03339 45.9323L5.49546 45.2578L6.19968 44.8138L5.469 44.51L5.85211 43.8789L6.555 44.2952L6.79156 43.4463L7.53442 43.7313L7.1688 44.4751L7.97975 44.2897Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M6.27546 33.9964L1.60781 35.0617L1.7998 35.9029L0.882812 36.1122L0.217158 33.1958L1.13414 32.9865L1.32455 33.8207L5.99221 32.7554L6.27546 33.9964Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M6.21155 23.6472C6.11608 24.0655 5.967 24.3797 5.76431 24.5897C5.56163 24.7997 5.31033 24.9262 5.01041 24.9689C4.7105 25.0117 4.36979 24.9895 3.98829 24.9025L1.91301 24.4288C1.52691 24.3407 1.21033 24.2128 0.963274 24.0452C0.716215 23.8776 0.549243 23.6557 0.462356 23.3796C0.370874 23.1024 0.372866 22.7547 0.468335 22.3364C0.564852 21.9135 0.714454 21.5971 0.917141 21.387C1.11628 21.1713 1.36351 21.0416 1.65883 20.9978C1.95414 20.9539 2.29485 20.9761 2.68095 21.0642L4.75623 21.5379C5.13773 21.625 5.45431 21.7528 5.70596 21.9215C5.95762 22.0902 6.12867 22.3154 6.2191 22.5972C6.31058 22.8743 6.30806 23.2244 6.21155 23.6472ZM5.33593 23.4474C5.36531 23.3187 5.35464 23.2171 5.30393 23.1427C5.25321 23.0682 5.1794 23.0103 5.08247 22.9688C4.98555 22.9274 4.88423 22.8946 4.77851 22.8704L2.08961 22.2567C1.9793 22.2315 1.87378 22.2171 1.77306 22.2135C1.66774 22.2088 1.57609 22.229 1.4981 22.274C1.42011 22.3191 1.36643 22.406 1.33706 22.5347C1.30978 22.6542 1.3215 22.7511 1.37221 22.8256C1.42292 22.9 1.49674 22.958 1.59366 22.9994C1.68599 23.0399 1.78731 23.0727 1.89762 23.0978L4.58652 23.7116C4.69224 23.7357 4.79723 23.7524 4.9015 23.7617C5.00682 23.7664 5.09795 23.7485 5.17489 23.708C5.25288 23.663 5.30656 23.5761 5.33593 23.4474Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M9.36916 16.0788L4.89062 12.5073L6.08995 11.0034C6.30453 10.7343 6.53251 10.5543 6.77387 10.4633C7.01155 10.3695 7.26188 10.358 7.52484 10.429C7.78413 10.4971 8.05199 10.6414 8.32845 10.8619C8.67493 11.1382 8.89477 11.4069 8.98794 11.6682C9.07743 11.9265 9.0793 12.1812 8.99354 12.4325C8.90778 12.6837 8.7679 12.9309 8.57389 13.1742L8.25642 13.5723L10.1584 15.0891L9.36916 16.0788ZM7.56529 13.0211L7.82985 12.6894C7.92685 12.5677 7.97822 12.458 7.98396 12.36C7.9897 12.2621 7.95569 12.1686 7.88192 12.0796C7.81109 11.987 7.70749 11.8863 7.5711 11.7775C7.45684 11.6864 7.34996 11.6162 7.25049 11.5671C7.15027 11.5112 7.04937 11.4941 6.94779 11.5156C6.84621 11.5371 6.74251 11.6142 6.63669 11.7469L6.37654 12.0731L7.56529 13.0211Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M16.4486 5.95683L15.6684 5.88515L15.8141 5.01432L15.0066 5.0814L14.9383 4.3529L15.722 4.39933L15.2802 3.69374L16.0575 3.3194L16.3337 4.10476L16.7924 3.46L17.3225 3.97395L16.7602 4.56657L17.5352 4.98611L17.0921 5.64692L16.4483 5.12495L16.4486 5.95683Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M26.8706 6.57701V1.78932L26.0078 1.78932V0.848755L28.9992 0.848755V1.78932L28.1435 1.78932V6.57701L26.8706 6.57701Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M36.9767 8.82146C36.5902 8.63531 36.317 8.42006 36.1574 8.17572C35.9977 7.93137 35.9304 7.65825 35.9554 7.35633C35.9805 7.05442 36.0779 6.72719 36.2477 6.37462L37.1713 4.45678C37.3431 4.09997 37.5382 3.81978 37.7566 3.61622C37.975 3.41265 38.2284 3.29923 38.517 3.27597C38.8076 3.24846 39.1461 3.32778 39.5327 3.51393C39.9235 3.70212 40.1987 3.91839 40.3584 4.16274C40.5243 4.40488 40.5958 4.67478 40.5728 4.97244C40.5498 5.27011 40.4524 5.59735 40.2806 5.95415L39.357 7.872C39.1872 8.22456 38.9921 8.50475 38.7717 8.71256C38.5512 8.92038 38.2936 9.03702 37.9988 9.06248C37.7082 9.08999 37.3675 9.00965 36.9767 8.82146ZM37.3664 8.01226C37.4853 8.06954 37.5867 8.08174 37.6706 8.04887C37.7544 8.01599 37.8274 7.95692 37.8894 7.87165C37.9513 7.78638 38.0059 7.6949 38.0529 7.5972L39.2496 5.11229C39.2987 5.01034 39.3362 4.91068 39.3622 4.81329C39.3902 4.71166 39.3909 4.61782 39.3643 4.53175C39.3377 4.44569 39.265 4.37403 39.1461 4.31675C39.0356 4.26356 38.9385 4.25341 38.8546 4.28628C38.7707 4.31916 38.6978 4.37823 38.6358 4.4635C38.5759 4.54452 38.5214 4.636 38.4723 4.73795L37.2756 7.22286C37.2285 7.32056 37.1889 7.4192 37.1566 7.51879C37.1286 7.62042 37.1258 7.71324 37.1481 7.79726C37.1747 7.88332 37.2474 7.95499 37.3664 8.01226Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M47.0281 12.7102L46.9243 11.9336L47.8058 11.8819L47.5607 11.1095L48.2557 10.8809L48.3848 11.6553L48.9744 11.0675L49.5124 11.7421L48.8081 12.1861L49.5388 12.4898L49.1557 13.121L48.4528 12.7046L48.2163 13.5536L47.4734 13.2686L47.839 12.5248L47.0281 12.7102Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M48.7323 23.0036L53.4 21.9382L53.208 21.0971L54.125 20.8878L54.7907 23.8042L53.8737 24.0135L53.6833 23.1792L49.0156 24.2446L48.7323 23.0036Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M48.7963 33.3526C48.8917 32.9344 49.0408 32.6202 49.2435 32.4102C49.4462 32.2001 49.6975 32.0737 49.9974 32.031C50.2973 31.9882 50.638 32.0103 51.0195 32.0974L53.0948 32.5711C53.4809 32.6592 53.7975 32.7871 54.0445 32.9547C54.2916 33.1223 54.4586 33.3442 54.5455 33.6203C54.6369 33.8975 54.6349 34.2452 54.5395 34.6635C54.443 35.0864 54.2934 35.4028 54.0907 35.6129C53.8915 35.8285 53.6443 35.9583 53.349 36.0021C53.0537 36.0459 52.713 36.0238 52.3269 35.9357L50.2516 35.462C49.8701 35.3749 49.5535 35.247 49.3018 35.0784C49.0502 34.9097 48.8791 34.6845 48.7887 34.4027C48.6972 34.1255 48.6997 33.7755 48.7963 33.3526ZM49.6719 33.5525C49.6425 33.6812 49.6532 33.7828 49.7039 33.8572C49.7546 33.9316 49.8284 33.9896 49.9253 34.0311C50.0223 34.0725 50.1236 34.1053 50.2293 34.1295L52.9182 34.7432C53.0285 34.7684 53.134 34.7828 53.2348 34.7864C53.3401 34.7911 53.4317 34.7709 53.5097 34.7259C53.5877 34.6808 53.6414 34.5939 53.6708 34.4652C53.698 34.3457 53.6863 34.2487 53.6356 34.1743C53.5849 34.0998 53.5111 34.0419 53.4142 34.0004C53.3218 33.96 53.2205 33.9272 53.1102 33.902L50.4213 33.2883C50.3156 33.2642 50.2106 33.2475 50.1063 33.2382C50.001 33.2335 49.9099 33.2514 49.8329 33.2918C49.7549 33.3369 49.7013 33.4238 49.6719 33.5525Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M45.6387 40.9212L50.1172 44.4927L48.9179 45.9966C48.7033 46.2657 48.4753 46.4457 48.2339 46.5366C47.9963 46.6305 47.7459 46.6419 47.483 46.5709C47.2237 46.5028 46.9558 46.3585 46.6794 46.1381C46.3329 45.8618 46.113 45.593 46.0199 45.3318C45.9304 45.0734 45.9285 44.8187 46.0143 44.5675C46.1 44.3163 46.2399 44.069 46.4339 43.8257L46.7514 43.4277L44.8494 41.9109L45.6387 40.9212ZM47.4425 43.9788L47.178 44.3106C47.081 44.4322 47.0296 44.542 47.0239 44.6399C47.0181 44.7379 47.0521 44.8313 47.1259 44.9203C47.1967 45.013 47.3003 45.1137 47.4367 45.2224C47.551 45.3136 47.6578 45.3837 47.7573 45.4329C47.8575 45.4887 47.9584 45.5058 48.06 45.4843C48.1616 45.4628 48.2653 45.3857 48.3711 45.253L48.6313 44.9268L47.4425 43.9788Z"
                            fill="currentcolor"
                          ></path>
                          <path
                            d="M38.5593 51.0431L39.3395 51.1148L39.1937 51.9856L40.0012 51.9185L40.0695 52.647L39.2858 52.6006L39.7276 53.3062L38.9503 53.6805L38.6741 52.8952L38.2154 53.5399L37.6853 53.026L38.2476 52.4334L37.4726 52.0138L37.9157 51.353L38.5596 51.875L38.5593 51.0431Z"
                            fill="currentcolor"
                          ></path>
                        </svg>
                      </div>
                      <FontAwesomeIcon
                        className=" absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
                        icon={faArrowUp}
                      />
                    </button>
                  </div>
                </>
              )}
            </>
          )}
        </body>
      </html>
    </AppProvider>
  );
}
